<div class="public-container">
  <header class="public-header">
    <h1>üåßÔ∏è Estado del disipador hidr√°ulico - La Calera</h1>
    <p class="subtitle">
      Panel p√∫blico de monitoreo. Datos autom√°ticos a partir de OpenWeather.
    </p>
  </header>

  <main>
    <div *ngIf="loading">Cargando estado del sistema...</div>
    <div *ngIf="error" class="error">{{ error }}</div>

    <section *ngIf="!loading && summary as s" class="public-grid">

      <!-- Riesgo actual -->
      <div class="card risk-card" [ngClass]="s.current_risk.color">
        <h2>Riesgo hidr√°ulico actual</h2>
        <div class="risk-level">{{ s.current_risk.level }}</div>
        <p class="risk-message">{{ s.current_risk.message }}</p>
      </div>

      <!-- Lluvia actual -->
      <div class="card small-card">
        <h3>Lluvia actual</h3>
        <p class="value">{{ s.current_rain.intensity_mm_h }} mm/h</p>
        <p class="label">{{ s.current_rain.label }}</p>
      </div>

      <!-- Pr√≥ximas 6 horas -->
      <div class="card small-card">
        <h3>Pr√≥ximas {{ s.next_hours.window_hours }} horas</h3>
        <p class="value">{{ s.next_hours.level }}</p>

        <div class="bars">
          <span class="bar" [class.filled]="s.next_hours.bars >= 1"></span>
          <span class="bar" [class.filled]="s.next_hours.bars >= 2"></span>
          <span class="bar" [class.filled]="s.next_hours.bars >= 3"></span>
        </div>

        <p class="label">
          Lluvia acumulada: {{ s.next_hours.accumulated_mm }} mm
        </p>
      </div>
    </section>

    <!-- Explicaci√≥n y CTA -->
    <section class="info-section">
      <h2>¬øQu√© est√°s viendo?</h2>
      <p>
        Este panel resume el comportamiento hidr√°ulico del disipador de energ√≠a
        proyectado en La Calera. A partir de la precipitaci√≥n pronosticada, el
        sistema estima la intensidad de lluvia, la carga h√≠drica acumulada y el
        nivel de riesgo para la obra.
      </p>
      <p>
        El objetivo es ilustrar c√≥mo podr√≠a funcionar un sistema de monitoreo
        y alerta temprana para una estructura hidr√°ulica real, combinando
        informaci√≥n clim√°tica y criterios de ingenier√≠a.
      </p>

      <div class="cta-box">
        <p>
          ¬øQuieres recibir alertas por correo cuando el riesgo suba a
          <strong>ALTO</strong> o <strong>MUY ALTO</strong>?
        </p>
        <div class="cta-buttons">
          <button (click)="goToRegister()">Registrarme</button>
          <button (click)="goToLogin()">Ya tengo cuenta</button>
        </div>
      </div>

      <p class="qr-hint">
        En la maqueta, este panel se puede consultar escaneando un c√≥digo QR
        que dirige a esta p√°gina.
      </p>
    </section>
  </main>
</div>
